{% import "macros.html" as macros %}
{% extends "layout.html" %}

{% block article_body %}

{% markdown %}
{{ data.content.intro }}
{% endmarkdown %}

<div id="key-container">
  <div>KEY</div>
  <div id="key">
    <div class="key-row">
      {% for group in groups %}
        <span class="summary-item item__{{ group }}">
          <span class="key__bullet"></span>
          <span class="item__name">{% if group === 'industrials' %}Industrial products / technology{% else %}{{ group | capitalize }}{% endif %}</span>
        </span>
      {% endfor %}
      <span class="summary-item item__others">
        <span class="key__bullet"></span>
        <span class="item__name">Uncategorised</span>
      </span>
    </div>
    <div class="key-row">
      <span class="summary-item item__chinese">
        <span class="key__bullet"></span>
        <span class="item__name">Chinese tariffs on US goods</span>
      </span>
      <span class="summary-item item__us">
        <span class="key__bullet"></span>
        <span class="item__name">US tariffs on Chinese goods</span>
      </span>
    </div>
  </div>
</div>

<div id="summary-graphic">
  <div id="summary-graphic__label">Timeline</div>

  {% for group in categorySummary %}
  <div class="bar-wrapper-outer">
    <div class="bar-group-metadata">
      {% if group.country == 'us' %}
      <span class="summary-item item__us">
        <span class="key__bullet"></span>
      </span>
      {% else %}
      <span class="summary-item item__chinese">
        <span class="key__bullet"></span>
      </span>
      {% endif %}
      <div class="bar-group-name">
        <a href="#{{ group.name }}">{{ group.name | formatDate('dddd, MMMM D') }}</a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% for row in timeline %}
  <h2 id="{{ row.name }}">{{ row.name | formatDate('dddd, MMMM D, YYYY') }}</h2>
  <p>{{ row.blurb }}</p>
  {% if groupedItems[row.name] | length > 0 %}
  <ol>
    {% for item in groupedItems[row.name] %}
    <li class="item__{{ item.category }}" data-dollareffect="{{ item.dollareffect }}">
      <span class="item__bullet">â€¢</span>
      <span class="item__name">{{ item.englishgoogletranslation }}</span>
    </li>
    {% endfor %}
  </ol>
  {% endif %}
{% endfor %}

<div id="sources">
  {% markdown %}
  {{ data.content.sources }}
  {% endmarkdown %}
</div>

{% endblock %}
