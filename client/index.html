{% import "macros.html" as macros %}
{% extends "layout.html" %}

{% block article_body %}

<div class="image-set">
  <div class="image-container graphic-b-1 small">
    <img alt="US-China trade war so far" src="images/trade-war-final_-mobile.png">
  </div>
  <div class="image-container graphic-b-1 medium">
    <img alt="US-China trade war so far" src="images/trade-war-final_-mid.png">
  </div>
</div>

{% markdown %}
{{ data.content.intro }}
{% endmarkdown %}

<div class="scroll-container">
  <div class="content">
  {% for event in timeline %}
    <div class="date-step" id="tariffs-{{ event.name }}" data-card-id={{ event.name }} data-country-name={{ event.country }} data-card-value={{ event.value | roundBillion }}>
      <div class="date-header">
        <h2>{{ event.name | formatDate('dddd, MMMM D, YYYY') }}</h2>
        {% if event.relatedarticle %}
          <a href="{{ event.relatedarticle }}" class="o-typography-link">Related article Â»</a>
        {% endif %}
      </div>
      <p>
        <span>{{ event.blurb }}</span>
      </p>
      {% if event.type !== 'announced' %}
        {% set eventGoodsLength = 0 %}
        {% for eventGoods in timelineGoods %}
          {% if eventGoods.date === event.name and eventGoods.country === event.country %}
            {% for tranche in eventGoods.tranches %}
              {% set eventGoodsLength = eventGoodsLength + (tranche.goods | length) %}
            {% endfor %}
          {% endif %}
        {% endfor %}
        <p>
          <a href="list/#tariffs-{{ event.name }}">See the full list of {{ eventGoodsLength | humanise }} items</a>
        </p>
      {% endif %}
    </div>
  {% endfor %}
  </div>
</div>

<div id="sources">
  {% markdown %}
  {{ data.content.sources }}
  {% endmarkdown %}
</div>

{% endblock %}
